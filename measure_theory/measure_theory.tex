% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Lebesgue Measure \& Integration},
  pdfauthor={Kexing Ying},
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=red,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin = 1.5in]{geometry}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{tikz}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{lipsum}
\usepackage[ruled,vlined]{algorithm2e}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}
\newtheorem{prop}{Proposition}
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem*{remark}{Remark}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{lemma}{Lemma}[section]
\newcommand{\diag}{\mathop{\mathrm{diag}}}
\newcommand{\Arg}{\mathop{\mathrm{Arg}}}
\newcommand{\hess}{\mathop{\mathrm{Hess}}}

\title{Lebesgue Measure \& Integration}
\author{Kexing Ying}
\date{January 11, 2021}

\begin{document}
\maketitle

{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}
\newpage

\hypertarget{motivation}{%
\section{Motivation}\label{motivation}}

We recall from \textbf{Analysis I} the definition of the Darboux
integral. While this notion of integration was sufficient for our use
case last year, as we shall see, there are some limitations with this
notion of integration. These limitations will be addressed by the means
of measure theory.

\begin{definition}[Darboux Integrable]
  A function \(f : [a, b] \to \mathbb{R}\) is called Darboux integrable if for 
  any partition \(\mathcal{P} = \{a = t_0 < t_1 < \cdots < t_{n - 1} < t_n = b \}\)
  for some \(n \ge 1\) if \([a, b]\), by defining the lower and upper Darboux sums, 
  \[L(f, \mathcal{P}) = \sum_{i = 1}^n (t_i - t_{i - 1}) \inf_{t \in [t_{i-1}, t_i]} f(t),\]
  and
  \[U(f, \mathcal{P}) = \sum_{i = 1}^n (t_i - t_{i - 1}) \sup_{t \in [t_{i-1}, t_i]} f(t),\]
  one has 
  \[\sup_{\mathcal{P}} L(f, \mathcal{P}) = \inf_{\mathcal{P}} U(f, \mathcal{P}).\]
  If this is the case we define the integral of \(f\) over \([a, b]\) to be this 
  value, i.e. 
  \[\int_a^b f := \sup_{\mathcal{P}} L(f, \mathcal{P}) = \inf_{\mathcal{P}} U(f, \mathcal{P}).\]
\end{definition}

Many functions are Darboux integrable and in fact, as demonstrated last
year, all functions in \(C_{pw}^\circ([a, b])\), that is piecewise
continuous functions on \([a, b]\) are Darboux integrable. Nonetheless,
however, the class of Darboux integrable functions is also rather
limited.

Consider the Dirichlet function \[\mathbf{1}_{\mathbb{Q}}(x) := 
  \begin{cases}
    1, \hspace{2mm} x \in \mathbb{Q};\\
    0, \hspace{2mm} x \in \mathbb{R}\setminus\mathbb{Q}.
  \end{cases}\] That is, the indicator function for \(\mathbb{Q}\). We
see that \(\mathbf{1}_\mathbb{Q}\) is not Darboux integrable since both
\(\mathbb{Q}\) and \(\mathbb{R}\setminus\mathbb{Q}\) are dense in
\(\mathbb{R}\) and so, for any partition \(\mathcal{P}\) of \([a, b]\),
\(L(\mathbf{1}_\mathbb{Q}, \mathcal{P}) = 0\) while
\(U(\mathbf{1}_\mathbb{Q}, \mathcal{P}) = 1\). This is not ideal, since,
as \(\mathbb{Q}\) is countable while \(\mathbb{R}\setminus\mathbb{Q}\)
is not, we intuitively expect that a satisfactory theory of integration
would assign \(\int_a^b \mathbf{1}_\mathbb{Q} = 0\).

Moreover, by defining
\(P = (q_n)_{n \in \mathbb{N}} \subseteq \mathbb{Q}\) be some
enumeration of \(\mathbb{Q} \cap [a, b]\), we can define the following
sequence of functions, \[f_n(x) := 
  \begin{cases}
    1, \hspace{2mm} x \in \{q_0, \cdots, q_n\};\\
    0, \hspace{2mm} \text{otherwise}. 
  \end{cases}\] It is not difficult to see that \(\int_a^b f_n = 0\) for
all \(n\) and \(f_n \to \mathbf{1}_\mathbb{Q}\) pointwise. However, this
implies
\[0 = \lim_{n \to \infty} \int_a^b f_n \neq \int_a^b \lim_{n \to \infty} f_n = 
  \int_a^b \mathbf{1}_\mathbb{Q},\] and in fact, the right hand side is
not even defined (as \(\mathbf{1}_\mathbb{Q}\) is not Darboux
integrable)!

To solve this issue we will introduce the notion of the Lebesgue measure
and furthermore, its associated Lebesgue integral which extends our
Darboux integral such that it has the ``nice'' properties we desire.

We will in this course also look at \(L^p\) spaces. From the perspective
of analysis, it is often convenient to work in Banach spaces (complete
normed vector spaces) such that we can utilise many existing theorems we
have proved in \textbf{Analysis II}, e.g.~Banach's fixed point theorem.
For instance, one can endow \(C_{pw}^\circ([a, b])\) with the
(semi-)norm \[\|f\|_{L^1} := \int_a^b \left| f \right|. \] Then, by
considering the aforementioned sequence
\((f_n) \subseteq C_{pw}^\circ([a, b])\), one can easily show that
\((f_n)\) is a Cauchy sequence with respect to \(\| \cdot \|_{L^1}\).
However, \(f_n \to \mathbf{1}_\mathbb{Q}\) pointwise. This motivates us
to introduce the Banach space \(L^1([a, b])\) of integrable functions,
and more generally, \(L^p\)-spaces later in the course.

Lastly, as we have seen within last term's probability module, measure
theory lays below as the foundations for probability theory. As a quick
reminder, we recall that a probability space is a special type of
measure space and random variables defined on these probability spaces
are simply measurable functions to \(\mathbb{R}\) (or more exotic
fields). This can be interpreted with connotations to real world
situations in several ways.

\newpage

\hypertarget{abstract-measure-theory}{%
\section{Abstract Measure Theory}\label{abstract-measure-theory}}

\hypertarget{measures-and-measure-spaces}{%
\subsection{Measures and Measure
Spaces}\label{measures-and-measure-spaces}}

As we would like an adequate theory to assign a notion of ``size'' on
sets, we need to construct a function from a set of sets to
\(\overline{\mathbb{R}^+_0}\). To achieve this, the natural idea is to
construct a function with domain being the power set, however, this is
not necessarily always possible or meaningful. Thus, instead of
assigning every subset of some set a size, we only look at some
collection of ``nice'' sets.

\begin{definition}[Algebra]
  Let \(X\) be some set and suppose we denote \(\mathcal{X}\) for the power set of \(X\),
  then a family \(\mathcal{A} \subseteq \mathcal{P}(X)\) is called an algebra 
  over \(X\) if 
  \begin{itemize}
    \item \(X \in \mathcal{A}\);
    \item for all \(A \in \mathcal{A}\), \(A^c = X \setminus A \in \mathcal{A}\);
    \item if \((A_k)_{i = 1}^n\) is a finite sequence of sets in \(\mathcal{A}\), 
      then \(\bigcup_{k = 1}^n A_k \in \mathcal{A}\).
  \end{itemize}
\end{definition}

\begin{definition}[\(\sigma\)-algebra]
  Let \(X\) be a set, then a \(\sigma\)-algebra \(\mathcal{A}\) on \(X\) is an 
  algebra on \(X\) such that \(\mathcal{A}\) is closed under countable unions, 
  i.e. if \((A_k)_{k = 1}^\infty\) is a sequence of sets in \(\mathcal{A}\), 
  then \(\bigcup_{k = 1}^\infty A_k \in \mathcal{A}\).
\end{definition}

As \(\sigma\)-algebras (and algebras) are simply sets of sets, there is
an induced order on \(\sigma\)-algebras by \(\subseteq\). If there are
two \(\sigma\)-algebras \(\mathcal{A}, \mathcal{B}\) such that
\(\mathcal{A} \subseteq \mathcal{B}\), then we say \(\mathcal{A}\) is
coarser than \(\mathcal{B}\).

Trivially, we find \(\{\varnothing, X\}\) is a \(\sigma\)-algebra.
Indeed, this is the coarsest \(\sigma\)-algebra. Furthermore, given a
set \(X\) and a subset \(A \subseteq X\), we have
\(\{\varnothing, A, A^c, X\}\) is also a \(\sigma\)-algebra.

While every \(\sigma\)-algebra is also an algebra, the converse is not
true. An counter-example of this is by consider the algebra
\[\mathcal{A} := \{\varnothing\} \cup \left\{ U \mid \exists \bigcup_{k = 1}^m (a_k, b_k], 
  m \ge 1, 0 \le a_k < b_k \le 1 \right\},\] on \(X = (0, 1]\). We see
that \(\mathcal{A}\) is an algebra (since
\((a, b]^c = (0, a] \cup (b, 0]\)) however \(\mathcal{A}\) is not a
\(\sigma\)-algebra on \(X\) since we can define the sequence
\(A_k = (0, 1 - 1 / k] \in \mathcal{A}\) but
\(\bigcup_k A_k = (0, 1) \not\in \mathcal{A}\).

\begin{prop}
  Let \(\mathcal{F}\) be an arbitrary collection of \(\sigma\)-algebra (or algebras) 
  over \(X\). Then the intersections 
  \[\bigcap \mathcal{F} := \bigcap_{\mathcal{A} \in \mathcal{F}} \mathcal{A},\]
  is a \(\sigma\)-algebra (or algebra).
\end{prop}
\proof

Straight forward by definition. \qed

With this, we have a notion of infimum on \(\sigma\)-algebras and hence,
we can also define a notion closure.

\begin{definition}[\(\sigma\)-algebra Generated by a set]
  Let \(\mathcal{C} \subseteq \mathcal{P}(X)\), then 
  \[\sigma(\mathcal{C}) := \bigcap \{\mathcal{A} \mid \mathcal{C} \subseteq \mathcal{A} 
    \wedge \mathcal{A} \in \mathcal{F}\},\]
  where \(\mathcal{F}\) is the set of all \(\sigma\)-algebras on \(X\).
\end{definition}

As previously shown, \(\sigma(\mathcal{C})\) is a intersection of
\(\sigma\)-algebras, and so the name suggests, the \(\sigma\)-algebra
generated by \(\mathcal{C}\) is the smallest \(\sigma\)-algebra
containing \(\mathcal{C}\). Indeed, we find
\(\sigma(\varnothing) = \{\varnothing, X\}\) and
\(\sigma(A) = \{\varnothing, A, A^c, X\}\). Moreover, we see that
\(\mathcal{C}\) is a \(\sigma\)-algebra if and only if
\(\sigma(\mathcal{C}) = \mathcal{C}\).

\begin{definition}[Borel \(\sigma\)-algebra]
  If \((X, \mathcal{T})\) is a topological space, then the Borel \(\sigma\)-algebra 
  over \(X\) is 
  \[B(X) := \sigma(\mathcal{T}).\]
\end{definition}

Unlike topologies, the unions and intersections in a \(\sigma\)-algebra
is treated symmetrically.

\begin{prop}
  If \(\mathcal{A}\) is a \(\sigma\)-algebra, then if \((A_k)_{k = 1}^\infty\) is 
  a sequence of sets in \(\mathcal{A}\), then 
  \[\bigcap_{k = 1}^\infty A_k \in \mathcal{A}.\]
\end{prop}
\proof

By considering de Morgen's identity, we have
\(\bigcap_{k = 1}^\infty A_k =  (\bigcup_{k = 1}^\infty A_k^c)^c\). So,
since \(\bigcup_{k = 1}^\infty A_k^c \in  \mathcal{A}\) as each
component is, \(\bigcup_{k = 1}^\infty A_k^c)^c\) and hence
\(\bigcap_{k = 1}^\infty A_k\) is also in \(\mathcal{A}\). \qed

\begin{definition}[Measurable Space]
  A set \(X\) equipped with a \(\sigma\)-algebra \(\mathcal{A}\) is called a 
  measurable space and is written as a tuple \((X, \mathcal{A})\). Furthermore, 
  if \(A \subseteq X\) is in \(\mathcal{A}\), then we say \(A\) is a measurable 
  set.
\end{definition}

\begin{definition}[Measure]
  Let \((X, \mathcal{A})\) is a measurable space. Then a measure on \((X, \mathcal{A})\) 
  is a function \(\mu : \mathcal{A} \to [0, \infty]\) such that 
  \begin{itemize}
    \item \(\mu(\varnothing) = 0\);
    \item if \((A_k)_{k = 1}^\infty \subseteq \mathcal{A}\) is a sequence of 
      pairwise disjoint sets, then 
      \[\mu\left(\bigcup_{k = 1}^\infty A_k\right) = \sum_{k = 1}^\infty \mu(A_k)\].
  \end{itemize}
  We call the second property \(\sigma\)-additivity. 
\end{definition}

\begin{definition}[Measure Space]
  A measurable space \((X, \mathcal{A})\) equipped with the measure \(\mu\) is 
  called a measure space and is written as a triplet \((X, \mathcal{A}, \mu)\).
\end{definition}

A commonly used measure on any arbitrary measurable space
\((X, \mathcal{A})\) is the counting measure \(\mu\). As the name
suggests, for all \(A \in \mathcal{A}\), \(\mu(A) = |A|\) if \(A\) is
finite and \(\infty\) otherwise. Another example of a measure is the
Dirac measure \(\delta_x : \mathcal{A} \to [0, \infty]\) for some
\(x \in X\) where for all \(A \in \mathcal{A}\), \(\delta_x(A) = 1\) if
\(x \in A\) and 0 otherwise. For the last example, let \(X\) be
uncountable and let
\(\mathcal{A} := \{A \subseteq X \mid A \text{ or } A^c \text{ is uncountable}\}\).
Then, one can show that \(\{X, \mathcal{A}\}\) forms a measurable space
and we find that the function \(\mu : \mathcal{A} \to [0, \infty]\)
defined as \(\mu(A) = 0\) if \(A\) is countable and \(\mu(A) = 1\) if
\(A^c\) is countable is a measure on \((X, \mathcal{A})\).

\begin{prop}
  Let \((X, \mathcal{A}, \mu)\) be a measure space. Then, 
  \begin{itemize}
    \item if \(A, B \in \mathcal{A}\) and \(A \subseteq B\), then \(\mu(A) \le \mu(B)\);
    \item if \(n \ge 1\), \((A_k)_{k = 1}^n\) is a sequence of pairwise disjoint sets 
      in \(\mathcal{A}\), then \[\mu\left(\bigcup_{k = 1}^n A_k\right) = 
        \sum_{k = 1}^n \mu (A_k);\]
    \item if \((A_k)_{k = 1}^\infty\) is a sequence of monotonically increasing 
      sets in \(\mathcal{A}\), then 
        \[\mu\left(\bigcup_{k = 1}^\infty A_k\right) = \lim_{k \to \infty}\mu(A_k).\]
  \end{itemize}
  We note that the limit in part 3 exists since the limit in monotonically increasing 
  on the extended reals (so bounded by \(\infty\)). 
  \begin{itemize}
    \item if \((A_k)_{k = 1}^\infty\) is a sequence of monotonically decreasing 
      sets in \(\mathcal{A}\), if \(\mu(A_1) < \infty\), then
      \[\mu\left(\bigcap_{k = 1}^\infty A_k\right) = \lim_{k \to \infty}\mu(A_k).\]
    \item if \(A \in \mathcal{A}\) and \((A_k)_{k = 1}^\infty\) is a sequence in 
      \(\mathcal{A}\), then \(\mu(A) \le \sum_{k = 1}^\infty \mu(A_k)\).
  \end{itemize}
  The last property is refereed to as \(\sigma\)-sub-additivity.
\end{prop}
\proof

Part 2 is trivial.

(Part 1) As \(B = A \sqcup B \setminus A = A \sqcup (A^c \cap B)\) where
\(A^c \cap B\) is measurable since both \(A^c\) and \(B\) are. So, by
\(\sigma\)-additivity,
\[\mu(B) = \mu(A \sqcup (A^c \cap B)) = \mu(A) + \mu(A^c \cap B) \ge \mu(A).\]
(Part 3) Define \(B_1 = A_1\) and
\(B_{k + 1} = A_{k + 1} \setminus A_k\). Then, \((B_k)_{k = 1}^\infty\)
is a sequence of disjoint subset in \(\mathcal{A}\). So, by
\(\sigma\)-additivity, \[\mu\left(\bigcup_{k = 1}^\infty A_k\right) = 
    \mu\left(\bigcup_{k = 1}^\infty B_k\right) = 
    \sum_{k = 1}^\infty \mu(B_k) = \lim_{n \to \infty} \sum_{k = 1}^n \mu(B_k)
    = \lim_{n \to \infty} \mu\left(\bigcup_{k = 1}^n B_k\right)= \lim_{n \to \infty} \mu(A_k). \]
(Part 4) Define \(B_k = A_1 \setminus A_k\), then
\((B_k)_{k = 1}^\infty\) is a sequence of monotonically increasing sets
in \(\mathcal{A}\). So, by part 3,
\[\mu\left(\bigcup_{k = 1}^\infty B_k \right) = \lim_{k \to \infty} \mu(B_l).\]
Furthermore, as \(A \subseteq B\) implies
\(\mu (B) - \mu(A) = \mu(B \setminus A)\), we have
\[\mu(A_1) - \mu \left(\bigcap_{k = 1}^\infty A_k\right) = 
    \mu\left(A_1 \setminus \bigcap_{k = 1}^\infty A_k\right) = 
    \mu\left(\bigcup_{k = 1}^\infty B_k \right) = \lim_{k \to \infty} \mu(B_k)
    = \mu(A_1) - \lim_{k \to \infty} \mu(A_k),\] hence the result.

(Part 5) Exercise. \qed

\hypertarget{constructing-measures}{%
\subsection{Constructing Measures}\label{constructing-measures}}

While it is fun to work with abstract measures in general, it is also
useful to consider specific measures. In this section we will look at
how to construct measures on arbitrary spaces. The general idea for
constructing measures is that, given a \emph{premeasure}
\(\tilde{\mu}\), we may extend it to an \emph{outer measure} \(\mu^*\),
and finally with the outer measure, we may restrict it to a measure
\(\mu\).

\begin{definition}[Premeasure]
  Let \(\mathcal{A}\) be an algebra on \(X\). A function \(\mu : \mathcal{A} \to [0, \infty]\) 
  is a premeasure if it satisfies \(\mu(\varnothing) = 0\) and countable additivity; 
  that is, given \((A_n)_{n = 1}^\infty \subseteq \mathcal{A}\) that is pairwise disjoint, 
  \[\mu\left(\bigcup_{n = 1}^\infty A_n\right) = \sum_{n = 1}^\infty \mu(A_n),\]
  provided \(\bigcup_{n = 1}^\infty A_n \in \mathcal{A}\).
\end{definition}
\begin{definition}[Outer Measure]
  A function \(\mu : \mathcal{P}(X) \to [0, \infty]\) is an outer measure if it 
  satisfies \(\mu(\varnothing) = 0\) and sub-additivity, that is, 
  if \((A_k)_{k = 1}^\infty\) is a sequence of subsets of \(X\), and 
  \(A \subseteq \bigcup A_k\) then 
  \[\mu(A) \le \sum_{k = 1}^\infty \mu(A_k).\]
\end{definition}

In order to prove the aforementioned argument, we will require some
proposition. However, as will be demonstrated below, the notion of
premeasure is in fact, too strict. Thus, for that reason, let us
introduce the following definition.

\begin{definition}[Cover]
  A family of sets \(\mathcal{K} \subseteq \mathcal{P}(X)\) is called a cover 
  of \(X\) if \(\varnothing \in \mathcal{K}\) and there exists a sequence 
  \((K_n)_{n = 1}^\infty\) in \(\mathcal{K}\) such that 
  \[X \subseteq \bigcup_{n = 1}^\infty K_n.\]
\end{definition}
\begin{remark}
  We note that this is a different definition of covers than that we had learnt 
  for the definition compactness of topological spaces.
\end{remark}

Straight away, we see that every algebra \(\mathcal{A}\) of \(X\) is a
cover of \(X\) as \(X \in \mathcal{A}\) and so we can simply let the the
countable sequence be \(K_n = X\). Thus, every proposition we prove
about covers apply also to algebras.

\begin{prop}\label{cath_mea}
  Let \(\mathcal{K}\) be a cover of \(X\), and \(\tilde{\mu} : \mathcal{K} \to [0, \infty]\) 
  be a map such that \(\tilde{\mu}(\varnothing) = 0\). Then  
  \[\mu^* : \mathcal{P}(X) \to [0, \infty] := A \mapsto 
    \inf \left\{\sum_{j = 1}^\infty \tilde{\mu}(K_j) \mid (K_j)_{j = 1}^\infty 
    \subseteq \mathcal{K} \wedge A \subseteq \bigcup_{j = 1}^\infty K_j \right\}\]
  is an outer measure on \(X\).
\end{prop}
\proof

\(\mu^*\) is well defined since for all \(A \subseteq X\), by the
definition of covers, there exists some \((K_n)_{n = 1}^\infty\),
\(\bigcup K_n \supseteq X \supseteq A\), and so, we are taking the
infimum of a non-empty set. Clearly \(\mu^*(\varnothing) = 0\) since we
can choose \(K_n = \varnothing\) and so, it remains to show
sub-additivity.

Let \((A_n)_{n = 1}^\infty\) be a sequence of subsets of \(X\), and
suppose \(A \subseteq \bigcup A_n\). For each \(n \in \mathbb{N}\) and
\(\epsilon > 0\), by the definition of infimum, there exists some
\((K_{n, j})_{j = 1}^\infty \subseteq \mathcal{K}\) such that
\(A_n \subseteq \bigcup K_{n, j}\) and
\[\sum_{j = 1}^\infty \tilde{\mu}(K_{n, j}) < \mu^*(A_n) + 2^{-n} \epsilon.\]
Now, by the fact that \(A \subseteq \bigcup A_n\), we have
\(A \subseteq \bigcup_n \bigcup_j K_{n, j}\), and so, again by the
definition of \(\mu^*\), we have
\[\mu^*(A) \le \sum_{n = 1}^\infty \sum_{j = 1}^\infty\tilde{\mu}(K_{n, j})
    < \sum_{n = 1}^\infty (\mu^*(A_n) + 2^{-n}\epsilon) 
    = \sum_{n = 1}^\infty \mu^*(A_n) + \epsilon.\] As \(\epsilon > 0\)
was arbitrary, \[\mu^*(A) \le \sum_{n = 1}^\infty \mu^*(A_n),\] so
\(\mu^*\) is a outer measure. \qed

With that, we can naturally construct a outer measure from a premeasure
(and in fact, weaker notions suffices). This, outer measure however, in
some sense overshoots measures as it is defined on all subsets of \(X\),
and does not attain \(\sigma\)-additivity but only
\(\sigma\)-sub-additivity.

\begin{lemma}\label{cath_sig}
  Let \(\mu^*\) be an outer measure on \(X\), then 
  \[\Sigma := \{A \subseteq X \mid \mu^*(B) = \mu^*(B \cap A) + \mu^*(B \cap A^c)\}\]
  is a \(\sigma\)-algebra on \(X\).
\end{lemma}
\begin{remark}
  By sub-additivity, we see that \(\Sigma\) is equivalently defined by requiring 
  \(\mu^*(B) \ge \mu^*(B \cap A) + \mu^*(B \cap A^c)\).
\end{remark}
\proof

\(\varnothing \in \Sigma\) since for all \(B \subseteq X\),
\(B \cap \varnothing = \varnothing\) and \(B \cap \varnothing^c = B\)
and so \[\mu^*(B \cap \varnothing) + \mu^*(B \cap \varnothing^c) 
    = \mu^*(\varnothing) + \mu^*(B) = \mu^*(B).\] Let \(A \in \Sigma\),
then for all \(B \subseteq X\),
\[\mu^*(B) = \mu^*(B \cap A) + \mu^*(B \cap A^c) 
    = \mu^*(B \cap (A^c)^c) + \mu^*(B \cap A^c),\] and so,
\(A^c \in \Sigma\).

To show that \(\Sigma\) is closed under union, let us first show that
\(\Sigma\) is closed under finite intersections. Let
\(A_1, A_2 \in \Sigma\), then for all \(B \subseteq X\), \[\begin{split}
    \mu^*(B) & = \mu^*(B \cap A_1) + \mu^*(B \cap A_1^c)\\
      & = \mu^*(B \cap A_1 \cap A_2) + \mu^*(B \cap A_1 \cap A_2^c) + \mu^*(B \cap A_1^c)\\
      & = \mu^*(B \cap (A_1 \cap A_2)) + \mu^*(B \cap (A_1 \cap A_2)^c \cap A_1)
         + \mu^*(B \cap (A_1 \cap A_2)^c \cap A_1^c)\\
      & = \mu^*(B \cap (A_1 \cap A_2)) + \mu^*(B \cap (A_1 \cap A_2)^c),
  \end{split}\] and so \(A_1 \cap A_2 \in \Sigma\). Now, suppose
\((A_n)\) is a sequence of disjoint sets in \(\Sigma\), it suffices to
show \(\bigcup_{n = 1}^\infty A_n \in \Sigma\) (we can assume this since
given a sequence of sets, we may define another disjoint sequence such
that their union are equal). Since the sequence is pairwise disjoint, we
have \[\begin{split}
    \mu^*(B) & = \mu^*(B \cap A_1) + \mu^*(B \cap A_1^c)\\
      & = \mu^*(B \cap A_1) + \mu^*(B \cap A_1^c \cap A_2) + \mu^*(B \cap A_1^c \cap A_2^c).
  \end{split}\] Indeed, as \(A_1 \cap A_2 = \varnothing\),
\(A_1^c \cap A_2 = A_2\) and so, \[\begin{split}
    \mu^*(B) & = \mu^*(B \cap A_1) + \mu^*(B \cap A_2) + \mu^*(B \cap A_1^c \cap A_2^c)\\
      & = \cdots\\
      & = \sum_{j = 1}^n \mu^*(B \cap A_j) + \mu^*\left(B \cap \bigcap_{j = 1}^n A_j^c\right)\\
      & = \sum_{j = 1}^n \mu^*(B \cap A_j) + \mu^*\left(B \cap \overline{\bigcup_{j = 1}^n A_j}\right)
  \end{split}\] for all \(n \in \mathbb{N}\). By sub-additivity, we have
\[\mu^*\left(B \cap \bigcup_{j = 1}^n A_j\right) \le \sum_{j = 1}^n \mu^*(B \cap A_j),\]
and so, by taking \(n \to \infty\), we have
\[\mu^*(B) \ge \mu^*\left(B \cap \bigcup_{j = 1}^\infty A_j\right) + 
    \mu^*\left(B \cap \overline{\bigcup_{j = 1}^\infty A_j}\right),\]
implying \(\bigcup A_n \in \Sigma\). \qed

\begin{theorem}[Hahn-Carathéodory Extension Theorem]
  Let \(X\) be an arbitrary set, \(\mathcal{A}\) an algebra over \(X\) and 
  \(\tilde{\mu} : \mathcal{A} \to [0, \infty]\) a premeasure on \(X\). Then by 
  defining \(\mu^*\) as in proposition \ref{cath_mea}, \(\Sigma\) as in
  lemma \ref{cath_sig}, and by defining \(\mu = \mu^* \mid_\Sigma\), then,
  \begin{itemize}
    \item \((X, \Sigma, \mu)\) is a measure space;
    \item \(\mathcal{A} \subseteq \Sigma\);
    \item for all \(A \in \mathcal{A}\), \(\mu(A) := \mu^*(A) = \tilde{\mu}(A)\).
  \end{itemize}
\end{theorem}
\proof

\qed

\end{document}
